<%- include('header') %>

	<div class="container mx-auto">
		<h1 class="text-5xl mb-4 mt-4">Player New</h1>

		<div style="display:grid; width: 30%" class="mx-auto">

			<div class="input-group mb-3">
				<input type="text" class="form-control" id="name" name="name"
					placeholder="Entrer un nom de l'utilisateur">
			</div>


			<div class="input-group mb-3">
				<input type="text" class="form-control" id="email" name="email" placeholder="Entrer une adresse email">
			</div>


			<button id="valider" class="btn btn-success">Valider</button>

		</div>



	</div>


	<script>

		document.addEventListener('DOMContentLoaded', e => {
			const valider = document.getElementById('valider');

			valider.addEventListener('click', async e => {
				try {
					const request = await axios.post(`http://localhost:5000/players/`, {
						name: document.getElementById('name').value,
						email: document.getElementById('email').value,
					});

					window.location.href = `http://localhost:5000/players/${request.data.id}`;
				} catch (err) {
					console.error(err.message);
				}
			});

		});

	</script>